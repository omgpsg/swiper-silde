<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>슬라이더 01 - 헤더컬러 변경</title>

    <!-- vendor -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <!--css-->
    <link rel="stylesheet" href="./assets/css/reset.min.css" />
    <link rel="stylesheet" href="./assets/css/swiper-01.min.css" />
</head>
<body>
    <div id="wrap">
        <main id="main">
            <header id="header" class="a">
                <div class="container">
                    <div id="header-inner">
                        <h1 class="tit">슬라이더 01 - 헤더컬러 변경</h1>
                    </div>
                </div>
            </header>
    
            <div class="main">
               
                <!--slider 시작-->
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide" data-header-type="light">Slider 01</div>
                        <div class="swiper-slide" data-header-type="dark">Slider 02</div>
                        <div class="swiper-slide" data-header-type="light">Slider 03</div>
                        <div class="swiper-slide" data-header-type="dark">Slider 04</div>
                        <div class="swiper-slide" data-header-type="light">Slider 05</div>
                    </div>
                </div>
                <!--slider 끝-->
    
            </div>
        </main>

    </div>

    <script>
        const header = document.querySelector('#header');
        let headerOldClass; // a

        function changeHeaderColor(slider){ // slider는 인자. 밑에서 swiper 가 들어가는곳이다. 
                    // slides : 슬라이더의 배열 [ 배열의 인덱스값 ] : 인덱스 값으로 슬라이드를 선택할 수 있다.
                    // (배열에 인덱스 값을 부여하여 인덱스 값으로 슬라이드 마크업(html)을 가져올 수 있다.)
                    // console.log(swiper.slides[mainSlider.activeIndex]); 

            let activeSlider = slider.slides[slider.activeIndex]; // slider 각 객체에 , slider의 인덱스 값을 부여한다. 마크업(html) 그대로 가져올 수 있다
            let hearderClass = activeSlider.dataset.headerType;

                    //데이터속성을 가져온다.
                    // console.log(activeSlider.getAttribute('data-header-type')); 
                    // console.log(activeSlider.dataset.headerType); 

            // const header = document.querySelector('#header'); 
            header.removeAttribute('class'); 
            header.classList.add(hearderClass , headerOldClass); //
        }

        //const : 변하지 않는 변수
        const mainSlider = new Swiper('.swiper-container' , {
            slidesPerView: 1,
            on: {
                init: function(swiper){
                    headerOldClass = header.className; // 원래 있던 a라는 클래스, 

                    changeHeaderColor(swiper);
                    
                },
                slideChange: function(swiper){
                    changeHeaderColor(swiper);
                }
            }
        });
    </script>
</body>
</html>